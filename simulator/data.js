// 基础数据
'use strict';

// 伤害类型数据
const DamageTypeInfo = {
  Fire: { text:'火', img:'38px-火.png', color:'#d30000', dotName: '灼烧' },
  Ice: { text:'冰', img:'38px-冰.png', color:'#00b3d3'},
  Wind: { text:'风', img:'38px-风.png', color:'#27a700', dotName: '风化' },
  Thunder:  { text:'雷', img:'38px-雷.png', color:'#a700a7', dotName: '触电' },
  Void:  { text:'虚数', img:'38px-虚数.png', color:'#bbae00'},
  Quantum:  { text:'量子', img:'38px-量子.png', color:'#0013bb'},
  Physical:  { text:'物理', short:'物', img:'38px-物理.png', color:'black', dotName: '裂伤' },
}
const AtkTypeInfo = {
  NA: '普攻',
  NS: '战技',
  US: '终结技',
  AA: '追击',
  SP: '秘技',
  DOT: '持续',
  AD: '附加',
  BRK: '击破',
}
// 职业类型数据
const JobTypeInfo = {
  '巡猎': { img:'38px-巡猎.png'},
  '毁灭': { img:'38px-毁灭.png'},
  '智识': { img:'38px-智识.png'},
  '虚无': { img:'38px-虚无.png'},
  '同谐': { img:'38px-同谐.png'},
  '存护': { img:'38px-存护.png'},
  '丰饶': { img:'38px-丰饶.png'},
}

// 遗器主属性
const EquipMainData = {
  SSR: {
    atk: [ 56.448, 19.7568 ],
    hp: [ 112.896, 39.5136 ],
    atkRate: [ 6.9120, 2.41920005 ],
    hpRate: [ 6.9120, 2.41920005 ],
    defRate: [ 8.64, 3.024 ],
    criRate: [ 5.184, 1.8144 ],
    criDamage: [ 10.3680, 3.6288 ],
    healRate: [ 5.5296, 1.9354 ],
    hit: [ 6.9120, 2.41920005 ],
    speed: [ 4.032, 1.4 ],
    bonusFire: [ 6.2208, 2.1773 ],
    bonusIce: [ 6.2208, 2.1773 ],
    bonusWind: [ 6.2208, 2.1773 ],
    bonusThunder: [ 6.2208, 2.1773 ],
    bonusVoid: [ 6.2208, 2.1773 ],
    bonusQuantum: [ 6.2208, 2.1773 ],
    bonusPhysical: [ 6.2208, 2.1773 ],
    breakRate: [ 10.3680, 3.6288 ],
    enRate: [ 3.1104, 1.0886 ],
  },
  SR: {
    atk: [ 45.1584, 15.80544 ],
    hp: [ 90.3168, 31.61088 ],
    atkRate: [ 5.5296, 1.9354 ],
    hpRate: [ 5.5296, 1.9354 ],
    defRate: [ 6.9120, 2.4192 ],
    criRate: [ 4.1472, 1.4515 ],
    criDamage: [ 8.2944, 2.903 ],
    healRate: [ 4.4237, 1.5483 ],
    hit: [ 5.5296, 1.9354 ],
    speed: [ 3.2256, 1.1 ],
    bonusFire: [ 4.9766, 1.7418 ],
    bonusIce: [ 4.9766, 1.7418 ],
    bonusWind: [ 4.9766, 1.7418 ],
    bonusThunder: [ 4.9766, 1.7418 ],
    bonusVoid: [ 4.9766, 1.7418 ],
    bonusQuantum: [ 4.9766, 1.7418 ],
    bonusPhysical: [ 4.9766, 1.7418 ],
    breakRate: [ 8.2944, 2.903 ],
    enRate: [ 2.4883, 0.8709 ],
  },
};

// 遗器副属性
const EquipSubData = {
  SSR: {
    atk: [ 16.935019, 19.051896, 21.168773 ],
    hp: [ 33.870039, 38.103794, 42.337549],
    def: [ 16.935019, 19.051896, 21.168773 ],
    atkRate: [ 3.456, 3.8880, 4.3200],
    hpRate: [ 3.456, 3.8880, 4.3200],
    defRate: [ 4.32, 4.86, 5.4 ],
    criRate: [ 2.592, 2.9160, 3.2400],
    criDamage: [ 5.184, 5.8320, 6.4800],
    hit: [ 3.456, 3.8880, 4.3200],
    dodge: [ 3.456, 3.8880, 4.3200],
    speed: [ 2.0, 2.3, 2.6 ],
    breakRate: [ 5.184, 5.8320, 6.4800],
  },
  SR: {
    atk: [ 13.548, 15.2415, 16.9350],
    hp: [ 27.096, 30.4830, 33.8700],
    def: [ 13.548, 15.2415, 16.9350],
    atkRate: [ 2.7648, 3.1104, 3.4560],
    hpRate: [ 2.7648, 3.1104, 3.4560],
    defRate: [ 3.456, 3.8880, 4.3200],
    criRate: [ 2.0736, 2.3328, 2.5920],
    criDamage: [ 4.1472, 4.6656, 5.184],
    hit: [ 2.7648, 3.1104, 3.4560],
    dodge: [ 2.7648, 3.1104, 3.4560],
    speed: [ 1.6, 1.8, 2.0 ],
    breakRate: [ 4.1472, 4.6656, 5.184],
  },
};
// 遗器部位主属性词条
const EquipPartWords = {
  head: [{ k: 'hp', w: 100 }],
  hand: [{ k: 'atk', w: 100 }],
  body: [
    { k: 'hpRate', w: 20 }, { k: 'atkRate', w: 20 },  { k: 'defRate', w: 20 },
    { k: 'criRate', w: 10 }, { k: 'criDamage', w: 10 }, { k: 'healRate', w: 10 }, { k: 'hit', w: 100 /* 10 */ },
  ],
  foot: [{ k: 'hpRate', w: 30 }, { k: 'atkRate', w: 30 }, { k: 'defRate', w: 30 }, { k: 'speed', w: 100 /* 10 */ }],
  link: [{ k: 'breakRate', w: 15 }, { k: 'enRate', w: 5 }, { k: 'hpRate', w: 26.67 }, { k: 'atkRate', w: 26.67 }, { k: 'defRate', w: 100 /*26.67*/ }],
  ball: [
    { k: 'hpRate', w: 12.33 }, { k: 'atkRate', w: 12.33 }, { k: 'defRate', w: 12.33 },
    { k: 'bonusPhysical', w: 9 }, { k: 'bonusFire', w: 9 }, { k: 'bonusIce', w: 9 }, { k: 'bonusThunder', w: 9 },
    { k: 'bonusWind', w: 9 }, { k: 'bonusQuantum', w: 9 }, { k: 'bonusVoid', w: 100 /*9*/ }, 
  ],
};
// 遗器副属性词条
const EquipSubWeights = [
  { k: 'atk', w: 125, p: 0.005},
  { k: 'hp', w: 125, p: 0.005},
  { k: 'def', w: 125, p: 0.003},
  { k: 'atkRate', w: 125, p: 1},
  { k: 'hpRate', w: 125, p: 1},
  { k: 'defRate', w: 125, p: 0.5},
  { k: 'criRate', w: 75, p: 2},
  { k: 'criDamage', w: 75, p: 1},
  { k: 'hit', w: 100, p: 0.75 },
  { k: 'dodge', w: 100, p: 0.5 },
  { k: 'speed', w: 50, p: 4 },
  { k: 'breakRate', w: 100, p: 0.6 },
];
// 遗器副词条基准分数
const EquipSubScore = {
  atk: 0.005,
  def: 0.003,
  hp: 0.005,
  atkRate: 1,
  hpRate: 1,
  defRate: 0.5,
  criRate: 2,
  criDamage: 1,
  hit: 0.75,
  dodge: 0.5,
  speed: 3,
  breakRate: 0.5,
}
// 部位简称
const EquipPartNames = {
  head: '头', hand: '手', body: '身', foot: '脚', link: '绳', ball: '球',
  头: 'head', 手: 'hand', 身: 'body', 脚: 'foot', 绳: 'link', 球: 'ball', 
}
// 属性展示相关数据
const AttributeText = {
  hp: { text:'生命值', short:'生命', short2:'小生命', s:'生',  type:'integer', fullText: '生命值' },
  hpRate: { text:'生命值%', short:'生命', s:'生', type:'percent'},
  atk: { text:'攻击力', short:'攻击', short2:'小攻击', s:'攻', type:'integer', fullText: '攻击力' },
  atkRate: { text:'攻击力%', short:'攻击', s:'攻', type:'percent' },
  def: { text:'防御力', short:'防御', s:'防', short2:'小防御', type:'integer', fullText: '防御力' },
  defRate: { text:'防御力%', short:'防御', s:'防', type:'percent' },
  speed: { text:'速度', short:'速度', s:'速', type:'float', fullText: '速度' },
  speedRate: { text:'速度%', short:'速度', type:'percent'},
  criRate: { text:'暴击率', short:'暴击', s:'暴', type:'percent', fullText: '暴击率' },
  criDamage: { text:'暴击伤害', short:'暴伤', s:'爆', type:'percent', fullText: '暴击伤害' },
  breakRate: { text:'击破特攻', short:'击破', s:'破', type:'percent', fullText: '击破特攻' },
  healRate: { text:'治疗加成', short:'治疗', s:'治', type:'percent', fullText: '治疗量加成' },
  healBonus: { text:'受治疗加成', short:'受治', s:'治', type:'percent' },
  shieldRate: { text:'护盾加成', short:'护盾', type:'percent' },
  hit: { text:'效果命中', short:'命中', s:'命', type:'percent', fullText: '效果命中' },
  dodge: { text:'效果抵抗', short:'抵抗', s:'抗', type:'percent', fullText: '效果抵抗' },
  enMax: { text:'最大能量', type:'integer' },
  enRate: { text:'能量恢复', short:'回能', s:'能', type:'percent', fullText: '能量恢复效率'},
  damageRate: { text:'承伤比例', short:'减伤', type:'percent' },
  damageDown: { text:'伤害下降', type:'percent' },
  defDown: { text:'防御下降', short:'减防', type:'percent' },
  defThrough: { text:'防御穿透', short:'破防', type:'percent' },
  bonusNA: { text:'普攻增伤', short:'普攻', type:'percent' },
  bonusNS: { text:'战技增伤', short:'战技', type:'percent' },
  bonusUS: { text:'终结技增伤', short:'终结技', type:'percent' },
  bonusAA: { text:'追击增伤', short:'追击', type:'percent' },
  bonusAD: { text:'附伤增伤', short:'附伤', type:'percent'},
  bonusDOT: { text:'DOT增伤', short:'dot', type:'percent' },
  bonusAll: { text:'所有伤害', short:'伤害', type:'percent'},
  defendAll: { text:'所有抗性', short:'全抗', type:'percent'},
  weakAll: { text:'全属性易伤', short:'易伤', type:'percent'},
};
for(let key in DamageTypeInfo) {
  const typeInfo =  DamageTypeInfo[key];
  const text = typeInfo.text;
  const short = typeInfo.short || text;
  AttributeText['bonus' + key] = { text: text+ '增伤', short: short + '伤', s:text.charAt(0), type:'percent', fullText: text + '属性伤害提高' };
  AttributeText['defend' + key] = { text: text + '抵抗', short: short + '抗', type:'percent' };
}

// 属性升级组合
const levelData = {
  '200_1474':[200.64,[391.248,471.504],[571.824,652.08],[752.4,832.656],[932.976,1013.232],[1113.552,1193.808],[1294.128,1374.384],1474.704],
  '195_1435':[195.36,[380.952,459.096],[556.776,634.920],[732.6,810.744],[908.424,986.568],[1084.248,1162.392],[1260.072,1338.216],1435.896],
  '190_1397':[190.08,[370.656,446.688],[541.728,617.76],[712.8,788.832],[883.872,959.904],[1054.944,1130.976],[1226.016,1302.048],1397.088],
  '184_1358':[184.8,[360.36,434.280],[526.680,600.6],[693,766.920],[859.32,933.24],[1025.64,11.56],[1191.96,1265.88],1358.280],
  '182_1340':[182.4,[355.68,428.64],[519.84,592.8],[684,756.96],[848.16,921.12],[1012.32,1085.28],[1176.48,1249.44],1340.64],
  '179_1319':[179.52,[350.064,421.872],[511.6320,583.44],[673.2,745.008],[834.768,906.576],[996.336,1068.144],[1157.904,1229.712],1319.472],
  '178_1305':[177.6,[346.32,417.36],[506.16,577.2],[666,737.04],[825.84,896.88],[985.68,1056.72],[1145.52,1216.56],1305.36],
  '174_1280':[174.24,[339.7680,409.464],[496.584,566.28],[653.4,723.096],[810.216,879.912],[967.032,1036.728],[1123.848,1193.544],1280.664],
  '173_1270':[172.8,[336.96,406.08],[492.48,561.6],[648,717.12],[803.52,872.64],[959.04,1028.16],[1114.56,1183.68],1270.08],
  '168_1241':[168.96,[329.472,397.0560],[481.5360,549.12],[633.6,701.184],[785.664,853.248],[937.728,1005.312],[1089.792,1157.376],1241.856],
  '163_1203':[163.68,[319.176,384.648],[466.488,531.96],[613.8,679.272],[761.112,826.584],[908.424,973.896],[1055.736,1121.208],1203.048],
  '163_1199':[163.2,[318.24,383.52],[465.12,530.4],[612,677.28],[758.880,824.160],[905.76,971.04],[1052.64,1117.92],1199.52],
  '158_1164':[158.4,[308.88,372.24],[451.44,514.8],[594,657.36],[736.56,799.92],[879.12,942.48],[1021.680,1085.04],1164.24],
  '153_1125':[153.12,[298.584,359.832],[436.392,497.64],[574.2,635.448],[712.008,773.256],[849.816,911.064],[987.624,1048.872],1125.432],
  '147_1086':[147.84,[288.288,347.424],[421.3440,480.48],[554.400,613.536],[687.456,746.592],[820.512,879.648],[953.568,1012.704],1086.624],
  '144_1058':[144,[280.8,338.4],[410.4,468],[540,597.6],[669.6,727.2],[799.2,856.8],[928.8,986.400],1058.4],
  '142_1047':[142.56,[277.992,335.016],[406.296,463.32],[534.6,591.624],[662.904,719.928],[791.208,848.232],[919.512,976.536],1047.816],
  '139_1023':[139.2,[271.44,327.12],[396.72,452.4],[522,577.680],[647.28,702.96],[772.56,828.24],[897.84,953.52],1023.12],
  '134_987':[134.4,[262.08,315.84],[383.04,436.8],[504,557.76],[624.96,678.72],[745.92,799.68],[866.88,920.64],987.84],
  '129_952':[129.6,[252.72,304.56],[369.36,421.2000],[486,537.84],[602.640,654.48],[719.28,771.120],[835.920,887.76],952.56],
  '126_931':[126.72,[247.104,297.792],[361.152,411.8400],[475.2000,525.888],[589.248,639.936],[703.296,753.984],[817.344,868.032],931.392],
  '124_917':[124.8,[243.36,293.28],[355.68,405.6],[468,517.920],[580.32,630.24],[692.640,742.56],[804.96,854.88],917.28],
  '121_892':[121.44,[236.808,285.384],[346.104,394.68],[455.4,503.976],[564.696,613.272],[673.992,722.568],[783.288,831.864],892.584],
  '120_882':[120,[234,282],[342,390],[450,498],[558,606],[666,714],[774,822],882],
  '115_846':[115.2,[224.64,270.72],[328.32,374.4],[432,478.08],[535.680,581.76],[639.36,685.44],[743.04,789.12],846.72],
  '111_815':[110.88,[216.216,260.568],[316.008,360.36],[415.8,460.152],[515.592,559.944],[615.384,659.736],[715.176,759.528],814.968],
  '110_811':[110.4,[215.28,259.44],[314.64,358.80],[414,458.16],[513.36,557.52],[612.72,656.88],[712.08,756.24],811.44],
  '105_776':[105.6,[205.92,248.16],[300.96,343.2],[396,438.24],[491.04,533.28],[586.08,628.32],[681.12,723.36],776.16],
  '102_756':[102.96,[200.772,241.9560],[293.4360,334.62],[386.1,427.284],[478.764,519.948],[571.428,612.612],[664.092,705.276],756.756],
  '100_737':[100.32,[195.624,235.752],[285.9120,326.04],[376.2,416.328],[466.488,506.616],[556.776,596.904],[647.064,687.192],737.352],
  '97_717':[97.68,[190.476,229.548],[278.388,317.46],[366.3,405.372],[454.212,493.284],[542.124,581.196],[630.036,669.108],717.948],
  '95_698':[95.04,[185.328,223.344],[270.8640,308.88],[356.4,394.416],[441.936,479.952],[527.472,565.488],[613.008,651.024],698.544],
  '92_679':[92.4,[180.18,217.1400],[263.3400,300.3],[346.5,383.4600],[429.66,466.62],[512.82,549.78],[595.98,632.94],679.140],
  '89_659':[89.76,[175.03,210.94],[255.82,291.72],[336.6,372.5],[417.38,453.29],[498.17,534.07],[578.95,614.86],659.74],
  '89_654':[89.1,[173.745,209.385],[253.935,289.575],[334.125,369.765],[414.3150,449.9550],[494.505,530.145],[574.695,610.335],654.885],
  '88_652':[88.8,[173.1600,208.68],[253.08,288.6],[333,368.5200],[412.920,448.4400],[492.8400,528.36],[572.76,608.28],652.680],
  '87_640':[87.12,[169.8840,204.732],[248.292,283.14],[326.7,361.548],[405.108,439.956],[483.516,518.364],[561.924,596.772],640.332],
  '84_620':[84.48,[164.736,198.5280],[240.7680,274.56],[316.8,350.592],[392.832,426.624],[468.8640,502.656],[544.896,578.688],620.928],
  '84_617':[84,[163.8,197.4],[239.4,273],[315,348.6],[390.6,424.2000],[466.2000,499.8],[541.8,575.400],617.400],
  '82_606':[82.5,[160.875,193.875],[235.125,268.125],[309.375,342.375],[383.625,416.625],[457.875,490.875],[532.125,565.125],606.375],
  '81_599':[81.6,[159.12,191.76],[232.56,265.2],[306,338.64],[379.4400,412.0800],[452.88,485.52],[526.32,558.96],599.76],
  '81_601':[81.84,[159.588,192.324],[233.244,265.98],[306.9,339.636],[380.556,413.292],[454.212,486.948],[527.868,560.604],601.524],
  '79_582':[79.2,[154.44,186.12],[225.72,257.4],[297,328.68],[368.28,399.96],[439.56,471.24],[510.8400,542.52],582.12],
  '78_573':[78,[152.1,183.3],[222.3,253.5],[292.5,323.7],[362.7,393.9],[432.9,464.1],[503.1,534.3],573.3],
  '76_564':[76.8,[149.76,180.48],[218.88,249.6000],[288,318.72],[357.12,387.8400],[426.24,456.9600],[495.36,526.08],564.48],
  '76_562':[76.56,[149.292,179.916],[218.196,248.82],[287.1,317.724],[356.004,386.6280],[424.908,455.5320],[493.812,524.436],562.716],
  '75_551':[75,[146.25,176.25],[213.75,243.75],[281.25,311.25],[348.75,378.75],[416.25,446.25],[483.75,513.75],551.25],
  '74_546':[74.4,[145.08,174.84],[212.0400,241.8],[279,308.76],[345.9600,375.72],[412.92,442.68],[479.88,509.64],546.84],
  '73_543':[73.92,[144.144,173.712],[210.6720,240.24],[277.2000,306.7680],[343.728,373.2960],[410.2560,439.824],[476.784,506.352],543.312],
  '72_533':[72.6,[141.57,170.61],[206.91,235.95],[272.25,301.29],[337.5900,366.63],[402.93,431.97],[468.27,497.31],533.61],
  '72_529':[72,[140.4,169.2],[205.2,234],[270,298.8],[334.8,363.6],[399.6,428.4],[464.4,493.2000],529.2],
  '71_523':[71.28,[138.996,167.508],[203.148,231.66],[267.3,295.812],[331.452,359.964],[395.604,424.116],[459.756,488.268],523.908],
  '69_511':[69.6,[135.72,163.56],[198.36,226.2],[261,288.8400],[323.64,351.48],[386.28,414.12],[448.92,476.76],511.56],
  '69_509':[69.3,[135.135,162.855],[197.505,225.225],[259.875,287.595],[322.245,349.9650],[384.615,412.3350],[446.985,474.705],509.355],
  '69_507':[69,[134.55,162.15],[196.65,224.25],[258.75,286.35],[320.85,348.4500],[382.9500,410.55],[445.05,472.65],507.15],
  '67_493':[67.2,[131.04,157.92],[191.52,218.4],[252,278.88],[312.48,339.36],[372.96,399.84],[433.44,460.32],493.92],
  '66_485':[66,[128.7,155.1],[188.1,214.5],[247.5,273.9],[306.9,333.3],[366.3,392.7],[425.7,452.1],485.1],
  '64_476':[64.8,[126.36,152.28],[184.68,210.6000],[243,268.92],[301.3200,327.24],[359.64,385.5600],[417.9600,443.88],476.28],
  '63_463':[63,[122.85,148.05],[179.55,204.75],[236.25,261.45],[292.95,318.15],[349.65,374.85],[406.35,431.55],463.05],
  '63_465':[63.36,[123.552,148.896],[180.576,205.9200],[237.6000,262.944],[294.624,319.968],[351.648,376.992],[408.672,434.016],465.696],
  '62_460':[62.7,[122.265,147.345],[178.695,203.775],[235.125,260.205],[291.555,316.635],[347.985,373.065],[404.415,429.495],460.845],
  '60_446':[60.72,[118.404,142.692],[173.052,197.34],[227.7,251.988],[282.348,306.636],[336.996,361.284],[391.644,415.932],446.292],
  '60_441':[60,[117,141],[171,195],[225,249],[279,303],[333,357],[387,411],441],
  '59_436':[59.4,[115.8300,139.59],[169.2900,193.05],[222.75,246.5100],[276.2100,299.97],[329.67,353.43],[383.13,406.89],436.5900],
  '57_418':[57,[111.15,133.95],[162.45,185.25],[213.75,236.55],[265.05,287.85],[316.35,339.15],[367.65,390.4500],418.9500],
  '56_412':[56.1,[109.3950,131.835],[159.885,182.325],[210.375,232.815],[260.865,283.3050],[311.355,333.795],[361.845,384.285],412.3350],
  '54_396':[54,[105.3000,126.9],[153.9,175.5],[202.5,224.1000],[251.1000,272.7000],[299.7000,321.3],[348.3,369.9],396.9],
  '52_388':[52.8,[102.96,124.08],[150.48,171.6],[198,219.12],[245.52,266.64],[293.04,314.16],[340.56,361.68],388.08],
  '51_374':[51,[99.45,119.85],[145.35,165.75],[191.25,211.65],[237.15,257.55],[283.05,303.45],[328.95,349.35],374.85],
  '49_363':[49.5,[96.525,116.325],[141.075,160.875],[185.625,205.425],[230.175,249.975],[274.725,294.525],[319.275,339.0750],363.8250],
  '48_352':[48,[93.6,112.8000],[136.8,156],[180,199.2],[223.2,242.4],[266.4,285.6],[309.6,328.8],352.8],
  '45_330':[45,[87.75,105.75],[128.25,146.25],[168.75,186.75],[209.25,227.25],[249.75,267.75],[290.25,308.25],330.75],

  '57_1270':[57.6,[221.76,290.88],[377.28,469.44],[555.84,648],[734.4,826.56],[912.96,1005.12],[1091.52,1183.68],1270.08],
  '52_1164':[52.8,[203.28,266.64],[345.84,430.32],[509.52,594],[673.2,757.68],[836.88,921.36],[1000.56,1085.04],1164.24],
  '48_1058':[48,[184.8,242.4],[314.4,391.200],[463.20,540],[612,688.8],[760.8,837.6],[909.6,986.40],1058.4],
  '43_952':[43.2,[166.32,218.160],[282.96,352.080],[416.88,486],[550.8,619.92],[684.72,753.84],[818.64,887.76],952.56],
  '38_846':[38.4,[147.84,193.920],[251.52,312.96],[370.56,432],[489.6,551.04],[608.64,670.08],[727.68,789.12],846.72],
  '33_740':[33.6,[129.36,169.68],[220.08,273.840],[324.24,378],[428.4,482.16],[532.56,586.32],[636.72,690.48],740.88],
  '30_661':[30, [115.5,151.5],[196.5,244.5],[289.5,337.5],[382.5,430.5],[475.5,523.5],[568.5,616.5],661.5],
  '28_635':[28.8,[110.88,145.44],[188.64,234.72],[277.92,324],[367.20,413.28],[456.48,502.560],[545.76,591.84],635.04],
  '27_595':[27,[103.95,136.35],[176.85,220.05],[260.55,303.75],[344.25,387.45],[427.95,471.15],[511.65,554.85],595.35],
  '26_582':[26.4,[101.64,133.32],[172.92,215.16],[254.76,297],[336.6,378.840],[418.44,460.68],[500.28,542.52],582.12],
  '24_529':[24,[92.4,121.2],[157.2,195.600],[231.60,270],[306,344.4],[380.4,418.8],[454.8,493.200],529.2],
  '21_476':[21.6,[83.16,109.080],[141.48,176.040],[208.44,243],[275.40,309.960],[342.36,376.92],[409.32,443.88],476.28],
  '21_463':[21,[80.85,106.050],[137.55,171.15],[202.65,236.25],[267.75,301.35],[332.85,366.45],[397.95,431.55],463.05],
  '19_423':[19.2,[73.92,96.960],[125.76,156.48],[185.28,216],[244.8,275.52],[304.32,335.04],[363.84,394.56],423.36],
  '18_396':[18,[69.30,90.9],[117.9,146.700],[173.70,202.5],[229.5,258.3],[285.3,314.1],[341.1,369.9],396.9],
  '16_370':[16.8,[64.68,84.84],[110.04,136.920],[162.12,189],[214.2,241.08],[266.28,293.16],[318.36,345.24],370.440],
  '15_330':[15,[57.75,75.75],[98.25,122.25],[144.75,168.75],[191.25,215.25],[237.75,261.75],[284.25,308.25],330.75],
  '14_317':[14.4,[55.440,72.72],[94.32,117.36],[138.96,162],[183.60,206.64],[228.24,251.280],[272.88,295.92],317.52],
  '12_264':[12,[46.2,60.6],[78.6,97.800],[115.80,135],[153,172.2],[190.2,209.4],[227.4,246.600],264.6],
  '9_198':[9,[34.650,45.45],[58.95,73.350],[86.85,101.25],[114.75,129.15],[142.65,157.05],[170.55,184.95],198.45],
}

// 击破伤害基础系数
const breakBase = [ 
  54.0,       58.0,       62.0,       67.5264,    70.5094,    73.5228,    76.5660,   79.6385,    82.7395,    85.8684,
  91.4944,    97.0680,    102.5892,   108.0579,   113.4743,   118.8383,   124.1499,  129.4091,   134.6159,   139.7703,
  149.3323,   158.8011,   168.1768,   177.4594,   186.6489,   195.7452,   204.7484,  213.6585,   222.4754,   231.1992,
  246.4276,   261.1810,   275.4733,   289.3179,   302.7275,   315.7144,   328.2905,  340.4671,   352.2554,   363.6658,
  408.1240,   451.7883,   494.6798,   536.8188,   578.2249,   618.9172,   658.9138,  698.2325,   736.8905,   774.9041,
  871.0599,   964.8705,   1056.4206,  1145.7910,  1233.0585,  1318.2965,  1401.5750, 1482.9608,  1562.5178,  1640.3068,
  1725.3215,  1861.9011,  1969.1242,  2074.0659,  2176.7983,  2277.3904,  2375.9085, 2472.4160,  2566.9739,  2659.6406,
  2780.3044,  2898.6022,  3014.6029,  3128.3729,  3239.9758,  3349.4730,  3456.9236, 3562.3843,  3665.9099,  3767.5533,
];

// 属性击破数据
const breakInfo = {
  Fire: { brkRate: 2.0, dotRate: 1.0, max: 1, late: 0,  count: 2, text: '灼烧' },
  Ice: { brkRate: 1.0, dotRate: 1.0, max: 1, late: 0, count: 1, text: '冻结解除' },
  Wind: { brkRate: 1.5, dotRate: 1.0, max: 5, late:0, count: 2, text: '风化' },
  Thunder:  { brkRate: 1.0, dotRate: 2.0, max: 1, late: 0, count: 2, text: '触电' },
  Void:  { brkRate: 0.5, dotRate: 0, max:1, late: 30.0, count: 1, text: '禁锢' },
  Quantum:  { brkRate: 0.5, dotRate: 0.6, max:5, late:20.0, count: 1, text: '纠缠' },
  Physical:  { brkRate: 2.0, dotRate: 2.0, max:1, late:0, count: 2, text: '裂伤' },
}

function makeTable(list) {
  const table = [];
  const titles = list[0];
  for(let i=1; i<list.length; i++) {
    const obj = {}
    const values = list[i];
    for(let j=0; j<titles.length; j++) {
      obj[titles[j]] = values[j];
    }
    table.push(obj);
  }
  return table;
}

function toPercent(v) {
  return (Math.floor( v * 10)*0.1).toFixed(1) + '%';
}

function sample(list) {
  if(!list || list.length===0) return null;
  return list[Math.floor(Math.random()*list.length)];
}

function rand(hit) {
  return Math.random() * 100 < hit;
}

function checkType(type, types) {
  types = (typeof types==='string')? [ types ]: types;
  type = (typeof type==='string')? [type]: type;
  for(let i=0; i<type.length; i++) {
    for(let j=0; j<types.length; j++) {
      if(type[i]===types[j])return type[i];
    }
  }
  return null;
}

function getTypeText(type) {
  const info = DamageTypeInfo[type];
  return info? info.text + '属性': AtkTypeInfo[type];
}

function filterItems(items) {
  const found = [];
  for(let i=0; i<items.length; i++) {
    if(found.indexOf(items[i])===-1) {
      found.push(items[i]);
    }
  }
  return found;
}

module.exports = {
  DamageTypeInfo,
  AtkTypeInfo,
  JobTypeInfo,
  EquipMainData,
  EquipSubData,
  EquipPartWords,
  EquipPartNames,
  EquipSubWeights,
  EquipSubScore,
  AttributeText,
  levelData,
  breakBase,
  breakInfo,
  makeTable,
  toPercent,
  sample,
  rand,
  checkType,
  getTypeText,
  filterItems,
}